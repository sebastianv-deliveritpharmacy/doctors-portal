import{G as k,r as h,c as _,o as g,i as d,u,J as I,h as L,e as B,a as e,K as m,L as F,M as P,O,P as E,f as N,Q as U,v as j,w as y,q as A,R as V,m as H,k as S,A as R,S as J,T as Z,U as q,t as G}from"./index-nV2mRpSo.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{i as M}from"./axios-D3XPDuSg.js";import{f as K}from"./shipment-CREcLUiF.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),W=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,t,l)=>l?l.toUpperCase():t.toLowerCase()),Q=o=>{const s=W(o);return s.charAt(0).toUpperCase()+s.slice(1)},X=(...o)=>o.filter((s,t,l)=>!!s&&s.trim()!==""&&l.indexOf(s)===t).join(" ").trim();/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var b={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=({size:o,strokeWidth:s=2,absoluteStrokeWidth:t,color:l,iconNode:p,name:r,class:n,...i},{slots:v})=>k("svg",{...b,width:o||b.width,height:o||b.height,stroke:l||b.stroke,"stroke-width":t?Number(s)*24/Number(o):s,class:X("lucide",...r?[`lucide-${D(Q(r))}-icon`,`lucide-${D(r)}`]:["lucide-icon"]),...i},[...p.map(w=>k(...w)),...v.default?[v.default()]:[]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=(o,s)=>(t,{slots:l})=>k(Y,{...t,iconNode:s,name:o},l);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=$("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=$("shopping-bag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=$("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),se={class:"chart-wrapper"},oe={__name:"ChartComponent",setup(o){const s=I,t=h([{name:"Orders",type:"area",data:[55,62,48,44,70,52,61,50]},{name:"Earnings",type:"bar",data:[80,85,60,30,90,45,85,40]},{name:"Refunds",type:"line",data:[20,18,12,10,11,25,15,30]}]),l=h({chart:{height:300,type:"line",stacked:!1,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}},stroke:{width:[2,0,2],curve:"smooth",dashArray:[0,0,6]},fill:{opacity:[.2,1,1],type:["solid","solid","solid"]},colors:["#3347FF","#00B894","#FF5C5C"],plotOptions:{bar:{columnWidth:"40%",borderRadius:4}},dataLabels:{enabled:!1},markers:{size:0},xaxis:{categories:["May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{colors:"#888"}}},yaxis:{labels:{style:{colors:"#888"}}},grid:{borderColor:"#eee",xaxis:{lines:{show:!1}}},legend:{position:"bottom",horizontalAlign:"center",markers:{width:10,height:10,radius:50}},tooltip:{shared:!0,intersect:!1,theme:"light"}});return(p,r)=>(g(),_("div",se,[d(u(s),{type:"line",height:"300",options:l.value,series:t.value},null,8,["options","series"])]))}},ne=x(oe,[["__scopeId","data-v-22f8509d"]]),re={name:"Apex charts",data:()=>({chartOptions:{chart:{id:"apexchart-example"},title:{text:"Completed prescription by %",align:"center",margin:40,style:{fontSize:"20px",fontWeight:"bold",color:"#263238"}},colors:["#2E93fA","#46DA62","#242E8A","#E91E63"],dataLabels:{enabled:!0},legend:{show:!0,position:"bottom"},labels:["Lisinopril","Levothyroxine","Atorvastatin","Metformin"]},series:[44,55,41,17]})},ie={class:"center-chart"};function le(o,s,t,l,p,r){const n=L("apexchart");return g(),_("div",ie,[d(n,{width:"600",type:"pie",options:o.chartOptions,series:o.series},null,8,["options","series"])])}const ce=x(re,[["render",le]]),T=()=>M.get("/user"),de=()=>M.get("/dashboard/stats"),ue={class:"dashboard-container"},he={class:"greeting-card"},pe={class:"greeting-text"},fe={class:"stats-overview"},ge={class:"card-top"},_e={class:"stat-title"},ve={class:"stat-value"},me={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"white",viewBox:"0 0 24 24",width:"20",height:"20"},ye=["href"],be={class:"chart-card"},ke={__name:"DashboardAdmin",setup(o){const s=h({name:"",email:""}),t=h([{title:"Active Doctors",value:0,change:0,icon:ae,iconBg:"#00B140",link:"#",linkText:"See doctors"},{title:"Prescriptions Today",value:0,change:0,icon:te,iconBg:"#0073e6",link:"#",linkText:"View all"},{title:"Completed Today",value:0,change:0,icon:"checkmark",iconBg:"#f59e0b",link:"#",linkText:"Check completed"},{title:"This Month",value:0,change:0,icon:ee,iconBg:"#9b59b6",link:"#",linkText:"Monthly stats"}]),l=async()=>{try{const r=await T();s.value=r.data}catch(r){console.error("Failed to fetch user",r)}},p=async()=>{try{const n=(await de()).data;t.value[0].value=n.active_doctors.count,t.value[0].change=n.active_doctors.change,t.value[1].value=n.prescriptions_today.count,t.value[1].change=n.prescriptions_today.change,t.value[2].value=n.completed_today.count,t.value[2].change=n.completed_today.change,t.value[3].value=n.this_month.count,t.value[3].change=n.this_month.change}catch(r){console.error("Failed to load dashboard stats",r)}};return B(()=>{localStorage.getItem("access_token")&&(l(),p())}),(r,n)=>(g(),_("div",ue,[e("div",he,[e("h2",pe,"Hello, "+m(s.value.name),1),n[1]||(n[1]=e("div",{class:"subtext"},"Track your activity and progress below.",-1)),e("div",fe,[(g(!0),_(F,null,P(t.value,i=>(g(),_("div",{key:i.title,class:"stat-card"},[e("div",ge,[e("div",null,[e("div",_e,m(i.title),1),e("div",ve,m(i.value),1),e("div",{class:O(["stat-change",{positive:i.change>0,negative:i.change<0,neutral:i.change===0}])},m(i.change>0?"↑":i.change<0?"↓":"+")+" "+m(Math.abs(i.change).toFixed(2))+"% ",3)]),e("div",{class:"stat-icon",style:E({backgroundColor:i.iconBg})},[i.icon==="checkmark"?(g(),_("svg",me,n[0]||(n[0]=[e("path",{d:"M9 16.17l-3.88-3.88L4 13.41l5 5 9-9-1.41-1.41z"},null,-1)]))):(g(),N(U(i.icon),{key:1,class:"icon"}))],4)]),e("a",{href:i.link,class:"stat-link"},m(i.linkText),9,ye)]))),128))])]),e("div",be,[d(ne),d(ce)])]))}},xe=x(ke,[["__scopeId","data-v-8533a1a6"]]),we={class:"dashboard-container"},Ce={class:"greeting-card-content"},Se={class:"greeting-left"},$e={class:"table-container"},Ae={class:"table-responsive"},De={__name:"DashboardUser",setup(o){const s=j(),t=h({name:"",email:""}),l=h([]),p=h(!1),r=h(1),n=h(20),i=h(0),v=h(""),w=async()=>{try{const c=await T();t.value=c.data}catch(c){console.error("Failed to fetch user",c),s.error("Failed to fetch user data. Please login again.")}},C=async()=>{try{p.value=!0;const c=await K(r.value,n.value,v.value);l.value=c.data.data.map(a=>({id:a.id,name:a.prescription_name||"-",status:a.status||"unknown",patient_name:a.patient_name||"-",date_of_birth:a.date_of_birth||"-",insurance:a.insurance||"-",city:a.city||"-",source:a.source||"-",arrived_to_office_date:a.arrived_to_office_date||"-",shipment_id:a.shipment_id||"-"})),i.value=c.data.total}catch(c){console.error("Error fetching shipments:",c),s.error("Unable to load shipments.")}finally{p.value=!1}};B(()=>{localStorage.getItem("access_token")&&(w(),C())});const z=[{title:"Patient",key:"patient_name",width:150},{title:"Prescription",key:"name",width:150},{title:"DOB",key:"date_of_birth",className:"hide-on-mobile",width:120},{title:"Insurance",key:"insurance",className:"hide-on-mobile",width:150},{title:"City",key:"city",className:"hide-on-mobile",width:120},{title:"Source",key:"source",className:"hide-on-mobile",width:120},{title:"Arrived",key:"arrived_to_office_date",render:c=>c.arrived_to_office_date?new Date(c.arrived_to_office_date).toLocaleDateString():"-",width:120},{title:"Status",key:"status",render:c=>{const a={confirmed_prescription_received:{label:"Confirmed",color:"#e6f7ff",textColor:"#1890ff"},data_entry:{label:"Data Entry",color:"#f6ffed",textColor:"#52c41a"},intake_processing:{label:"Intake",color:"#fff7e6",textColor:"#fa8c16"},insurance_verification:{label:"Insurance",color:"#fff1f0",textColor:"#f5222d"},copay_assistant:{label:"Co-pay",color:"#f6faff",textColor:"#096dd9"},production:{label:"Production",color:"#f9f0ff",textColor:"#722ed1"},collecting_copay:{label:"Collecting",color:"#fff0f6",textColor:"#c41d7f"},delivery_confirmation:{label:"Delivered",color:"#e6fffb",textColor:"#13c2c2"},default:{color:"#f0f0f0",textColor:"#595959"}},f=a[c.status]||{...a.default,label:c.status||"Unknown"};return k(q,{style:{backgroundColor:f.color,color:f.textColor,fontWeight:"500",padding:"0 8px",whiteSpace:"nowrap"},bordered:!1},{default:()=>f.label})},width:120}];return(c,a)=>(g(),_("div",we,[d(u(S),{vertical:"",size:"large"},{default:y(()=>[d(u(A),{class:"greeting-card"},{default:y(()=>[e("div",Ce,[e("div",Se,[d(u(V),{label:"",value:`Hello, ${t.value.name}`},null,8,["value"]),a[3]||(a[3]=e("div",{class:"subtext"}," Here you can see the status of your prescriptions. Updates are pulled from our internal system every 30 minutes to ensure accuracy.",-1))]),a[4]||(a[4]=e("div",{class:"greeting-right"},[e("div",{class:"help-container"},[e("span",{class:"help-title"},"Need help? Contact us:"),e("ul",{class:"help-list"},[e("li",null,[H("Phone: "),e("a",{href:"tel:+11231231233"},"832-939-8137")]),e("li",null,"Fax: 832 939 8128")])])],-1))])]),_:1}),d(u(A),null,{default:y(()=>[d(u(S),{justify:"space-between",align:"center",style:{"margin-bottom":"16px"}},{default:y(()=>[d(u(R),{value:v.value,"onUpdate:value":a[0]||(a[0]=f=>v.value=f),placeholder:"Search prescriptions or patients...",clearable:"",style:{"max-width":"300px"}},null,8,["value"])]),_:1}),e("div",$e,[e("div",Ae,[d(u(J),{columns:z,data:l.value,bordered:!0,loading:p.value,class:"prescription-table"},null,8,["data","loading"])])]),d(u(S),{justify:"end",style:{"margin-top":"16px"}},{default:y(()=>[d(u(Z),{page:r.value,"onUpdate:page":[a[1]||(a[1]=f=>r.value=f),C],"page-size":n.value,"item-count":i.value,"show-size-picker":"","page-sizes":[5,10,20],"onUpdate:pageSize":a[2]||(a[2]=f=>{n.value=f,r.value=1,C()})},null,8,["page","page-size","item-count"])]),_:1})]),_:1})]),_:1})]))}},Be=x(De,[["__scopeId","data-v-dc0fb92e"]]),ze={__name:"DashboardRouter",setup(o){const s=G();return(t,l)=>(g(),N(U(u(s).isAdmin()?xe:Be)))}};export{ze as default};
