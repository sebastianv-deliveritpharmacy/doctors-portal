import{v as A,H as T,r as u,W as F,e as V,c as j,i as t,w as s,u as l,k as v,h as H,o as R,q as D,a as n,R as G,m as _,A as d,B as m,S as Y,G as w,T as L,s as O,x as W,X as x,Y as U,z as M,K as q,U as K}from"./index-CDUznlbP.js";import{f as X,u as J,c as Q}from"./shipment-B3B_i5qP.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-D3XPDuSg.js";const ee={class:"dashboard-container"},te={class:"greeting-card-content"},ae={class:"greeting-left"},le={class:"table-container"},oe={class:"table-responsive"},re={__name:"DoctorPrescriptionsView",setup(se){const I=T(),y=A(),C=I.params.id,k=u("Doctor"),N=u([]),S=u(0),c=u(!1),a=u({id:null,name:"",status:"",patient_name:"",date_of_birth:null,insurance:"",city:"",source:"",arrived_to_office_date:null,arrived_to_office_time:""}),h=u(!1),g=u(""),f=u(1),b=u(10);F([g,f,b],()=>{p()});const z=()=>{a.value={id:null,name:"",status:"",patient_name:"",date_of_birth:null,insurance:"",city:"",source:"",arrived_to_office_date:null,arrived_to_office_time:""},c.value=!0},B=r=>{a.value={...r},c.value=!0},$=async()=>{try{const r={user_id:C,patient_name:a.value.patient_name,prescription_name:a.value.name,status:a.value.status,date_of_birth:a.value.date_of_birth?P(a.value.date_of_birth):null,insurance:a.value.insurance,city:a.value.city,source:a.value.source,arrived_to_office_date:a.value.arrived_to_office_date?P(a.value.arrived_to_office_date):null};a.value.id?(await J(a.value.id,r),y.success("Shipment updated!")):(await Q(r),y.success("Shipment created!")),c.value=!1,p()}catch(r){console.error("Error saving shipment:",r),y.error("Could not save shipment.")}},p=async()=>{try{h.value=!0;const r=await X(C,f.value,b.value,g.value);k.value=r.doctorName||"Doctor",N.value=r.data.data.map(e=>({id:e.id,name:e.prescription_name||"-",status:e.status||"unknown",patient_name:e.patient_name||"-",date_of_birth:e.date_of_birth||"-",insurance:e.insurance||"-",city:e.city||"-",source:e.source||"-",arrived_to_office_date:e.arrived_to_office_date||"-",arrived_to_office_time:e.arrived_to_office_time||"-"})),S.value=r.data.total}catch(r){console.error("Error fetching shipments:",r),y.error("Unable to load shipment updates.")}finally{h.value=!1}};function P(r){if(!r)return null;const e=new Date(r),i=o=>o.toString().padStart(2,"0");return`${e.getFullYear()}-${i(e.getMonth()+1)}-${i(e.getDate())} ${i(e.getHours())}:${i(e.getMinutes())}:${i(e.getSeconds())}`}V(p);const E=[{title:"ID",key:"id",className:"hide-on-mobile",width:80},{title:"Patient",key:"patient_name",width:150},{title:"Prescription",key:"name",width:150},{title:"DOB",key:"date_of_birth",className:"hide-on-mobile",width:120,render:r=>r.date_of_birth||"-"},{title:"Insurance",key:"insurance",className:"hide-on-mobile",width:120},{title:"City",key:"city",className:"hide-on-mobile",width:120},{title:"Source",key:"source",className:"hide-on-mobile",width:120},{title:"Arrived",key:"arrived_to_office_date",width:150,render:r=>r.arrived_to_office_date?new Date(r.arrived_to_office_date).toLocaleString():"-"},{title:"Status",key:"status",width:180,render:r=>{const e={confirmed_prescription_received:{label:"Confirmed",color:"#e6f7ff",textColor:"#1890ff"},data_entry:{label:"Data Entry",color:"#f6ffed",textColor:"#52c41a"},intake_processing:{label:"Intake",color:"#fff7e6",textColor:"#fa8c16"},insurance_verification:{label:"Insurance",color:"#fff1f0",textColor:"#f5222d"},copay_assistant:{label:"Co-pay",color:"#f6faff",textColor:"#096dd9"},production:{label:"Production",color:"#f9f0ff",textColor:"#722ed1"},collecting_copay:{label:"Collecting",color:"#fff0f6",textColor:"#c41d7f"},delivery_confirmation:{label:"Delivered",color:"#e6fffb",textColor:"#13c2c2"},default:{color:"#f0f0f0",textColor:"#595959"}},i=e[r.status]||{...e.default,label:r.status||"Unknown"};return w(K,{style:{backgroundColor:i.color,color:i.textColor,fontWeight:"500",padding:"0 8px",whiteSpace:"nowrap"},bordered:!1},{default:()=>i.label})}},{title:"Actions",key:"actions",width:100,render:r=>w("div",{style:"display: flex; gap: 8px;"},[w(m,{size:"small",type:"info",secondary:!0,onClick:()=>B(r)},{default:()=>"Edit"})])}];return(r,e)=>{const i=H("n-form-item-gi");return R(),j("div",ee,[t(l(v),{vertical:"",size:"large"},{default:s(()=>[t(l(D),{class:"greeting-card"},{default:s(()=>[n("div",te,[n("div",ae,[t(l(G),{label:"",value:`You are currently viewing ${k.value}`},null,8,["value"]),e[15]||(e[15]=n("div",{class:"subtext"},"These are the prescriptions associated with this doctor",-1))]),e[16]||(e[16]=n("div",{class:"greeting-right"},[n("div",{class:"help-container"},[n("span",{class:"help-title"},"Need help? Contact us:"),n("ul",{class:"help-list"},[n("li",null,[_("Phone: "),n("a",{href:"tel:+11231231233"},"832-939-8137")]),n("li",null,"Fax: 832 939 8128")])])],-1))])]),_:1}),t(l(D),null,{default:s(()=>[t(l(v),{justify:"space-between",align:"center",style:{"margin-bottom":"16px"}},{default:s(()=>[t(l(d),{value:g.value,"onUpdate:value":e[0]||(e[0]=o=>g.value=o),placeholder:"Search prescriptions or patients...",clearable:"",style:{"max-width":"300px"}},null,8,["value"]),t(l(v),{justify:"space-between",align:"center"},{default:s(()=>[t(l(m),{type:"primary",onClick:e[1]||(e[1]=o=>r.$router.push("/dashboard/doctors"))},{default:s(()=>e[17]||(e[17]=[_(" Go Back ")])),_:1,__:[17]}),t(l(m),{type:"primary",onClick:z},{default:s(()=>e[18]||(e[18]=[_(" Add Prescription ")])),_:1,__:[18]})]),_:1})]),_:1}),n("div",le,[n("div",oe,[t(l(Y),{columns:E,data:N.value,bordered:!0,loading:h.value,class:"prescription-table"},null,8,["data","loading"])])]),t(l(v),{justify:"end",style:{"margin-top":"16px"}},{default:s(()=>[t(l(L),{page:f.value,"onUpdate:page":[e[2]||(e[2]=o=>f.value=o),e[4]||(e[4]=o=>{f.value=o,p()})],"page-size":b.value,"item-count":S.value,"show-size-picker":"","page-sizes":[5,10,20],"onUpdate:pageSize":e[3]||(e[3]=o=>{b.value=o,f.value=1,p()})},null,8,["page","page-size","item-count"])]),_:1})]),_:1}),t(l(O),{show:c.value,"onUpdate:show":e[14]||(e[14]=o=>c.value=o),preset:"card",style:{width:"500px"}},{header:s(()=>[n("h2",null,q(a.value.id?"Edit Prescription":"Create Prescription"),1)]),default:s(()=>[t(l(W),null,{default:s(()=>[t(l(x),{cols:24,"x-gap":12},{default:s(()=>[t(i,{span:12,label:"Patient Name"},{default:s(()=>[t(l(d),{value:a.value.patient_name,"onUpdate:value":e[5]||(e[5]=o=>a.value.patient_name=o),placeholder:"Patient Name"},null,8,["value"])]),_:1}),t(i,{span:12,label:"Date of Birth"},{default:s(()=>[t(l(U),{value:a.value.date_of_birth,"onUpdate:value":e[6]||(e[6]=o=>a.value.date_of_birth=o),type:"date","value-format":"yyyy-MM-dd",placeholder:"Select date",clearable:""},null,8,["value"])]),_:1})]),_:1}),t(l(x),{cols:24,"x-gap":12},{default:s(()=>[t(i,{span:12,label:"Prescription Name"},{default:s(()=>[t(l(d),{value:a.value.name,"onUpdate:value":e[7]||(e[7]=o=>a.value.name=o),placeholder:"Prescription Name"},null,8,["value"])]),_:1}),t(i,{span:12,label:"Source"},{default:s(()=>[t(l(d),{value:a.value.source,"onUpdate:value":e[8]||(e[8]=o=>a.value.source=o),placeholder:"Source"},null,8,["value"])]),_:1})]),_:1}),t(l(x),{cols:24,"x-gap":12},{default:s(()=>[t(i,{span:12,label:"Insurance"},{default:s(()=>[t(l(d),{value:a.value.insurance,"onUpdate:value":e[9]||(e[9]=o=>a.value.insurance=o),placeholder:"Insurance Provider"},null,8,["value"])]),_:1}),t(i,{span:12,label:"City"},{default:s(()=>[t(l(d),{value:a.value.city,"onUpdate:value":e[10]||(e[10]=o=>a.value.city=o),placeholder:"City"},null,8,["value"])]),_:1})]),_:1}),t(l(M),{label:"Status"},{default:s(()=>[t(l(d),{value:a.value.status,"onUpdate:value":e[11]||(e[11]=o=>a.value.status=o),placeholder:"Enter status manually",type:"textarea",autosize:{minRows:3,maxRows:6},style:{"min-height":"100px"}},null,8,["value"])]),_:1}),t(l(M),{label:"Arrived to Office Date"},{default:s(()=>[t(l(U),{value:a.value.arrived_to_office_date,"onUpdate:value":e[12]||(e[12]=o=>a.value.arrived_to_office_date=o),type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"Select date",clearable:""},null,8,["value"])]),_:1}),t(l(v),{justify:"end",class:"mt-4"},{default:s(()=>[t(l(m),{onClick:e[13]||(e[13]=o=>c.value=!1)},{default:s(()=>e[19]||(e[19]=[_("Cancel")])),_:1,__:[19]}),t(l(m),{type:"primary",onClick:$},{default:s(()=>e[20]||(e[20]=[_("Save")])),_:1,__:[20]})]),_:1})]),_:1})]),_:1},8,["show"])]),_:1})])}}},ce=Z(re,[["__scopeId","data-v-d88050f0"]]);export{ce as default};
