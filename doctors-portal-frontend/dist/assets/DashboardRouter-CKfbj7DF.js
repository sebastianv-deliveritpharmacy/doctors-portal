import{G as w,r as u,c as m,o as g,i as d,u as p,J as F,h as N,e as M,a as s,K as y,L as E,M as O,O as V,P as j,f as T,Q as B,v as R,R as H,w as f,q as D,S as J,m as Z,k as S,A as q,T as G,U as K,V as Q,t as W}from"./index-CIon11F2.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{i as z}from"./axios-D3XPDuSg.js";import{f as X}from"./shipment-CREcLUiF.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Y=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,c)=>c?c.toUpperCase():e.toLowerCase()),ee=n=>{const t=Y(n);return t.charAt(0).toUpperCase()+t.slice(1)},te=(...n)=>n.filter((t,e,c)=>!!t&&t.trim()!==""&&c.indexOf(t)===e).join(" ").trim();/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var b={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=({size:n,strokeWidth:t=2,absoluteStrokeWidth:e,color:c,iconNode:h,name:o,class:i,...l},{slots:_})=>w("svg",{...b,width:n||b.width,height:n||b.height,stroke:c||b.stroke,"stroke-width":e?Number(t)*24/Number(n):t,class:te("lucide",...o?[`lucide-${$(ee(o))}-icon`,`lucide-${$(o)}`]:["lucide-icon"]),...l},[...h.map(C=>w(...C)),..._.default?[_.default()]:[]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=(n,t)=>(e,{slots:c})=>w(ae,{...e,iconNode:t,name:n},c);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=A("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=A("shopping-bag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=A("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),ie={class:"chart-wrapper"},re={__name:"ChartComponent",setup(n){const t=F,e=u([{name:"Orders",type:"area",data:[55,62,48,44,70,52,61,50]},{name:"Earnings",type:"bar",data:[80,85,60,30,90,45,85,40]},{name:"Refunds",type:"line",data:[20,18,12,10,11,25,15,30]}]),c=u({chart:{height:300,type:"line",stacked:!1,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}},stroke:{width:[2,0,2],curve:"smooth",dashArray:[0,0,6]},fill:{opacity:[.2,1,1],type:["solid","solid","solid"]},colors:["#3347FF","#00B894","#FF5C5C"],plotOptions:{bar:{columnWidth:"40%",borderRadius:4}},dataLabels:{enabled:!1},markers:{size:0},xaxis:{categories:["May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{colors:"#888"}}},yaxis:{labels:{style:{colors:"#888"}}},grid:{borderColor:"#eee",xaxis:{lines:{show:!1}}},legend:{position:"bottom",horizontalAlign:"center",markers:{width:10,height:10,radius:50}},tooltip:{shared:!0,intersect:!1,theme:"light"}});return(h,o)=>(g(),m("div",ie,[d(p(t),{type:"line",height:"300",options:c.value,series:e.value},null,8,["options","series"])]))}},le=x(re,[["__scopeId","data-v-22f8509d"]]),ce={name:"Apex charts",data:()=>({chartOptions:{chart:{id:"apexchart-example"},title:{text:"Completed prescription by %",align:"center",margin:40,style:{fontSize:"20px",fontWeight:"bold",color:"#263238"}},colors:["#2E93fA","#46DA62","#242E8A","#E91E63"],dataLabels:{enabled:!0},legend:{show:!0,position:"bottom"},labels:["Lisinopril","Levothyroxine","Atorvastatin","Metformin"]},series:[44,55,41,17]})},de={class:"center-chart"};function pe(n,t,e,c,h,o){const i=N("apexchart");return g(),m("div",de,[d(i,{width:"600",type:"pie",options:n.chartOptions,series:n.series},null,8,["options","series"])])}const ue=x(ce,[["render",pe]]),U=()=>z.get("/user"),he=()=>z.get("/dashboard/stats"),ge={class:"dashboard-container"},_e={class:"greeting-card"},ve={class:"greeting-text"},me={class:"stats-overview"},ye={class:"card-top"},fe={class:"stat-title"},ke={class:"stat-value"},be={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"white",viewBox:"0 0 24 24",width:"20",height:"20"},we=["href"],xe={class:"chart-card"},Ce={__name:"DashboardAdmin",setup(n){const t=u({name:"",email:""}),e=u([{title:"Active Doctors",value:0,change:0,icon:oe,iconBg:"#00B140",link:"#",linkText:"See doctors"},{title:"Prescriptions Today",value:0,change:0,icon:ne,iconBg:"#0073e6",link:"#",linkText:"View all"},{title:"Completed Today",value:0,change:0,icon:"checkmark",iconBg:"#f59e0b",link:"#",linkText:"Check completed"},{title:"This Month",value:0,change:0,icon:se,iconBg:"#9b59b6",link:"#",linkText:"Monthly stats"}]),c=async()=>{try{const o=await U();t.value=o.data}catch(o){console.error("Failed to fetch user",o)}},h=async()=>{try{const i=(await he()).data;e.value[0].value=i.active_doctors.count,e.value[0].change=i.active_doctors.change,e.value[1].value=i.prescriptions_today.count,e.value[1].change=i.prescriptions_today.change,e.value[2].value=i.completed_today.count,e.value[2].change=i.completed_today.change,e.value[3].value=i.this_month.count,e.value[3].change=i.this_month.change}catch(o){console.error("Failed to load dashboard stats",o)}};return M(()=>{localStorage.getItem("access_token")&&(c(),h())}),(o,i)=>(g(),m("div",ge,[s("div",_e,[s("h2",ve,"Hello, "+y(t.value.name),1),i[1]||(i[1]=s("div",{class:"subtext"},"Track your activity and progress below.",-1)),s("div",me,[(g(!0),m(E,null,O(e.value,l=>(g(),m("div",{key:l.title,class:"stat-card"},[s("div",ye,[s("div",null,[s("div",fe,y(l.title),1),s("div",ke,y(l.value),1),s("div",{class:V(["stat-change",{positive:l.change>0,negative:l.change<0,neutral:l.change===0}])},y(l.change>0?"↑":l.change<0?"↓":"+")+" "+y(Math.abs(l.change).toFixed(2))+"% ",3)]),s("div",{class:"stat-icon",style:j({backgroundColor:l.iconBg})},[l.icon==="checkmark"?(g(),m("svg",be,i[0]||(i[0]=[s("path",{d:"M9 16.17l-3.88-3.88L4 13.41l5 5 9-9-1.41-1.41z"},null,-1)]))):(g(),T(B(l.icon),{key:1,class:"icon"}))],4)]),s("a",{href:l.link,class:"stat-link"},y(l.linkText),9,we)]))),128))])]),s("div",xe,[d(le),d(ue)])]))}},Se=x(Ce,[["__scopeId","data-v-8533a1a6"]]),Ae={class:"dashboard-container"},De={class:"greeting-card-content"},$e={class:"greeting-left"},Me={class:"table-responsive"},Te={__name:"DashboardUser",setup(n){const t=R(),e=u({name:"",email:""}),c=u([]),h=u(!1),o=u(1),i=u(20),l=u(0),_=u(""),C=async()=>{try{const r=await U();e.value=r.data}catch(r){console.error("Failed to fetch user",r),t.error("Failed to fetch user data. Please login again.")}},k=async()=>{try{h.value=!0;const r=await X(o.value,i.value,_.value);c.value=r.data.data.map(a=>({id:a.id,name:a.prescription_name||"-",status:a.status||"unknown",date_shipped:a.date_shipped?new Date(a.date_shipped).getTime():null,delivered_at:a.delivered_at?new Date(a.delivered_at).getTime():null,patient_name:a.patient_name||"-",shipment_id:a.shipment_id||"-",rx_number:a.rx_number||"-"})),l.value=r.data.total}catch(r){console.error("Error fetching shipments:",r),t.error("Unable to load shipments.")}finally{h.value=!1}};M(()=>{localStorage.getItem("access_token")&&(C(),k())}),H(_,()=>{o.value=1,k()});const I=[{title:"ID",key:"id"},{title:"Shipment ID",key:"shipment_id"},{title:"Patient",key:"patient_name"},{title:"Prescription",key:"name"},{title:"Status",key:"status",render:r=>{const a={confirmed_prescription_received:"info",data_entry:"default",intake_processing:"warning",insurance_verification:"warning",copay_assistant:"info",production:"primary",collecting_copay:"warning",delivery_confirmation:"success"},v={confirmed_prescription_received:"Confirmed Prescription Received",data_entry:"Data Entry",intake_processing:"Intake Processing",insurance_verification:"Insurance Verification & Authorization",copay_assistant:"Co-pay Assistant or Foundation Assistant",production:"Production",collecting_copay:"Collecting Co-pay",delivery_confirmation:"Delivery Confirmation"},L=a[r.status]||"default",P=v[r.status]||r.status;return w(Q,{type:L},{default:()=>P})}},{title:"Shipped At",key:"date_shipped",render:r=>r.date_shipped?new Date(r.date_shipped).toLocaleString():"—"},{title:"Delivered At",key:"delivered_at",render:r=>r.delivered_at?new Date(r.delivered_at).toLocaleString():"—"}];return(r,a)=>(g(),m("div",Ae,[d(p(S),{vertical:"",size:"large"},{default:f(()=>[d(p(D),{class:"greeting-card"},{default:f(()=>[s("div",De,[s("div",$e,[d(p(J),{label:"",value:`Hello, ${e.value.name}`},null,8,["value"]),a[3]||(a[3]=s("div",{class:"subtext"},"Here you can see the status of your prescriptions",-1))]),a[4]||(a[4]=s("div",{class:"greeting-right"},[s("span",{class:"help-title"},"Need help? Contact us:"),s("ul",{class:"help-list"},[s("li",null,[Z("Phone: "),s("a",{href:"tel:+11231231233"},"832-939-8137")]),s("li",null,"Fax: 832 939 8128")])],-1))])]),_:1}),d(p(D),null,{default:f(()=>[d(p(S),{justify:"space-between",align:"center",style:{"margin-bottom":"16px"}},{default:f(()=>[d(p(q),{value:_.value,"onUpdate:value":a[0]||(a[0]=v=>_.value=v),placeholder:"Search prescriptions or patients...",clearable:"",style:{"max-width":"300px"}},null,8,["value"])]),_:1}),s("div",Me,[d(p(G),{columns:I,data:c.value,bordered:!0,loading:h.value},null,8,["data","loading"])]),d(p(S),{justify:"end",style:{"margin-top":"16px"}},{default:f(()=>[d(p(K),{page:o.value,"onUpdate:page":[a[1]||(a[1]=v=>o.value=v),k],"page-size":i.value,"item-count":l.value,"show-size-picker":"","page-sizes":[5,10,20],"onUpdate:pageSize":a[2]||(a[2]=v=>{i.value=v,o.value=1,k()})},null,8,["page","page-size","item-count"])]),_:1})]),_:1})]),_:1})]))}},Be=x(Te,[["__scopeId","data-v-2854233e"]]),Pe={__name:"DashboardRouter",setup(n){const t=W();return(e,c)=>(g(),T(B(p(t).isAdmin()?Se:Be)))}};export{Pe as default};
