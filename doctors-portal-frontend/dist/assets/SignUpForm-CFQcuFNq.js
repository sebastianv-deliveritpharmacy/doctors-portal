import{u as q,x as F,y as K,r as m,c as S,j as t,w as i,g as a,s as T,h as _,o as B,z as I,A as u,C as g,D as f,E as c,l as z,a as k,F as E,B as $,n as M,t as N}from"./index-C_dhaJxW.js";import{i as P}from"./axios-D3XPDuSg.js";import{a as V}from"./apiRoutes-CgTPNgLq.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"auth-container"},H={style:{display:"flex","justify-content":"space-between","align-items":"center"}},D=["innerHTML"],L={__name:"SignUpForm",setup(O){const{t:n}=q(),v=_();F();const p=K(),U=m(null),w=m(!1),b=m(!1),r=m({name:"",email:"",password:"",password_confirmation:""}),C={name:[{required:!0,message:n("signup.msg.nameRequired"),trigger:["input","blur"]},{min:2,message:n("signup.msg.nameMin"),trigger:["input","blur"]}],email:[{required:!0,message:n("signup.msg.emailRequired"),trigger:["input","blur"]},{type:"email",message:n("signup.msg.emailInvalid"),trigger:["input","blur"]}],password:[{required:!0,message:n("signup.msg.passwordRequired"),trigger:["input","blur"]},{min:6,message:n("signup.msg.passwordMin"),trigger:["input","blur"]}],password_confirmation:[{validator:(s,e)=>e===r.value.password,message:n("signup.msg.passwordsMustMatch"),trigger:["input","blur"]}]},R=async()=>{var s,e,l,h;if(!b.value){p.warning(n("signup.msg.acceptTermsFirst"));return}try{w.value=!0;const o={name:r.value.name,email:r.value.email,password:r.value.password,password_confirmation:r.value.password_confirmation},{data:d,status:y}=await P.post(V.signUp,o);if(y===201){p.success(n("signup.msg.checkEmail")),v.push("/login");return}p.success(n("signup.msg.success")),v.push("/login")}catch(o){let d=n("signup.msg.genericError");if((e=(s=o==null?void 0:o.response)==null?void 0:s.data)!=null&&e.errors){const y=Object.keys(o.response.data.errors)[0];d=o.response.data.errors[y][0]}else(h=(l=o==null?void 0:o.response)==null?void 0:l.data)!=null&&h.message&&(d=o.response.data.message);p.error(d)}finally{w.value=!1}};return(s,e)=>(B(),S("div",A,[t(a(T),{title:s.$t("signup.title"),hoverable:"",class:"auth-card"},{default:i(()=>[t(a(I),{ref_key:"formRef",ref:U,model:r.value,rules:C,size:"large",onSubmit:u(R,["prevent"])},{default:i(()=>[t(a(g),{path:"name",label:s.$t("signup.name")},{default:i(()=>[t(a(f),{value:r.value.name,"onUpdate:value":e[0]||(e[0]=l=>r.value.name=l),placeholder:s.$t("signup.namePlaceholder"),onKeydown:e[1]||(e[1]=c(u(()=>{},["prevent"]),["enter"]))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(a(g),{path:"email",label:s.$t("signup.email")},{default:i(()=>[t(a(f),{value:r.value.email,"onUpdate:value":e[2]||(e[2]=l=>r.value.email=l),placeholder:s.$t("signup.emailPlaceholder"),onKeydown:e[3]||(e[3]=c(u(()=>{},["prevent"]),["enter"]))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(a(g),{path:"password",label:s.$t("signup.password")},{default:i(()=>[t(a(f),{value:r.value.password,"onUpdate:value":e[4]||(e[4]=l=>r.value.password=l),type:"password",placeholder:s.$t("signup.passwordPlaceholder"),"show-password-on":"click",onKeydown:e[5]||(e[5]=c(u(()=>{},["prevent"]),["enter"]))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(a(g),{path:"password_confirmation",label:s.$t("signup.passwordConfirm")},{default:i(()=>[t(a(f),{value:r.value.password_confirmation,"onUpdate:value":e[6]||(e[6]=l=>r.value.password_confirmation=l),type:"password",placeholder:s.$t("signup.passwordConfirmPlaceholder"),"show-password-on":"click",onKeydown:e[7]||(e[7]=c(u(()=>{},["prevent"]),["enter"]))},null,8,["value","placeholder"])]),_:1},8,["label"]),t(a(z),{vertical:"",size:24},{default:i(()=>[k("div",H,[t(a(E),{checked:b.value,"onUpdate:checked":e[8]||(e[8]=l=>b.value=l)},{default:i(()=>[k("span",{innerHTML:s.$t("signup.acceptTermsHtml")},null,8,D)]),_:1},8,["checked"]),t(a($),{text:"",onClick:e[9]||(e[9]=l=>a(v).push("/login"))},{default:i(()=>[M(N(s.$t("signup.haveAccount")),1)]),_:1})]),t(a($),{type:"primary",size:"large",block:!0,loading:w.value,"attr-type":"submit",style:{"background-color":"#2080f0"}},{default:i(()=>[M(N(s.$t("signup.createAccount")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])]))}},X=j(L,[["__scopeId","data-v-dfc3ebf3"]]);export{X as default};
