import{u as j,y as F,J as x,r as u,X as R,e as A,I as w,S as L,B as h,c as Y,j as t,w as i,g as o,l as _,i as G,o as J,s as M,a as d,T as O,t as c,n as m,D as p,U as W,V as X,v as Z,z as q,Y as k,Z as z,C as I}from"./index-CaOXgG-J.js";import{a as K,u as Q,c as ee}from"./shipment-CREcLUiF.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-D3XPDuSg.js";const te={class:"dashboard-container"},re={class:"greeting-card-content"},oe={class:"greeting-left"},le={class:"subtext"},ie={class:"greeting-right"},se={class:"help-container"},ne={class:"help-title"},de={class:"help-list"},ue={class:"table-container"},ce={class:"table-responsive"},pe={__name:"DoctorPrescriptionsView",setup(fe){const{t:s}=j(),B=x(),y=F(),N=B.params.id,C=u("Doctor"),S=u([]),D=u(0),f=u(!1),r=u({id:null,name:"",status:"",patient_name:"",date_of_birth:null,insurance:"",city:"",source:"",arrived_to_office_date:null,arrived_to_office_time:""}),$=u(!1),g=u(""),v=u(1),P=u(10);R([g,v,P],()=>{b()}),s("dashboardPrescription.confirmed"),s("dashboardPrescription.dataEntry"),s("dashboardPrescription.intake"),s("dashboardPrescription.insuranceVerification"),s("dashboardPrescription.copay"),s("dashboardPrescription.production"),s("dashboardPrescription.collecting"),s("dashboardPrescription.delivered");const V=()=>{r.value={id:null,name:"",status:"",patient_name:"",date_of_birth:null,insurance:"",city:"",source:"",arrived_to_office_date:null,arrived_to_office_time:""},f.value=!0},E=a=>{r.value={...a},f.value=!0},H=async()=>{try{const a={user_id:N,patient_name:r.value.patient_name,prescription_name:r.value.name,status:r.value.status,date_of_birth:r.value.date_of_birth?U(r.value.date_of_birth):null,insurance:r.value.insurance,city:r.value.city,source:r.value.source,arrived_to_office_date:r.value.arrived_to_office_date?U(r.value.arrived_to_office_date):null};r.value.id?(await Q(r.value.id,a),y.success(s("dashboardPrescription.editShipment"))):(await ee(a),y.success(s("dashboardPrescription.addShipment"))),f.value=!1,b()}catch(a){console.error("Error saving shipment:",a),y.error(s("dashboardPrescription.errorShipment"))}},b=async()=>{try{$.value=!0;const a=await K(N,v.value,P.value,g.value);C.value=a.data.user_name||"Doctor",S.value=a.data.data.data.map(e=>({id:e.id,name:e.prescription_name||"-",status:e.status||"unknown",patient_name:e.patient_name||"-",date_of_birth:e.date_of_birth||"-",insurance:e.insurance||"-",city:e.city||"-",source:e.source||"-",arrived_to_office_date:e.arrived_to_office_date||"-",arrived_to_office_time:e.arrived_to_office_time||"-"})),D.value=a.data.total}catch(a){console.error("Error fetching shipments:",a),y.error(s("dashboardPrescription.errorUploadShipment"))}finally{$.value=!1}};function U(a){if(!a)return null;const e=new Date(a),n=l=>l.toString().padStart(2,"0");return`${e.getFullYear()}-${n(e.getMonth()+1)}-${n(e.getDate())} ${n(e.getHours())}:${n(e.getMinutes())}:${n(e.getSeconds())}`}A(b);const T=[{title:s("dashboardPrescription.table.id"),key:"id",className:"hide-on-mobile",width:80},{title:s("dashboardPrescription.table.patient"),key:"patient_name",width:150},{title:s("dashboardPrescription.table.prescription"),key:"name",width:150},{title:s("dashboardPrescription.table.dob"),key:"date_of_birth",className:"hide-on-mobile",width:120,render:a=>a.date_of_birth||"-"},{title:s("dashboardPrescription.table.insurance"),key:"insurance",className:"hide-on-mobile",width:120},{title:s("dashboardPrescription.table.city"),key:"city",className:"hide-on-mobile",width:120},{title:s("dashboardPrescription.table.source"),key:"source",className:"hide-on-mobile",width:120},{title:s("dashboardPrescription.table.arrived"),key:"arrived_to_office_date",width:150,render:a=>a.arrived_to_office_date?new Date(a.arrived_to_office_date).toLocaleString():"-"},{title:s("dashboardPrescription.table.status"),key:"status",width:180,render:a=>{const e={confirmed_prescription_received:{label:"Confirmed",color:"#e6f7ff",textColor:"#1890ff"},data_entry:{label:"Data Entry",color:"#f6ffed",textColor:"#52c41a"},intake_processing:{label:"Intake",color:"#fff7e6",textColor:"#fa8c16"},insurance_verification:{label:"Insurance",color:"#fff1f0",textColor:"#f5222d"},copay_assistant:{label:"Co-pay",color:"#f6faff",textColor:"#096dd9"},production:{label:"Production",color:"#f9f0ff",textColor:"#722ed1"},collecting_copay:{label:"Collecting",color:"#fff0f6",textColor:"#c41d7f"},delivery_confirmation:{label:"Delivered",color:"#e6fffb",textColor:"#13c2c2"},default:{color:"#f0f0f0",textColor:"#595959"}},n=e[a.status]||{...e.default,label:a.status||"Unknown"};return w(L,{style:{backgroundColor:n.color,color:n.textColor,fontWeight:"500",padding:"0 8px",whiteSpace:"nowrap"},bordered:!1},{default:()=>n.label})}},{title:s("dashboardPrescription.table.actions"),key:"actions",width:100,render:a=>w("div",{style:"display: flex; gap: 8px;"},[w(h,{size:"small",type:"info",secondary:!0,onClick:()=>E(a)},{default:()=>s("dashboardPrescription.table.edit")})])}];return(a,e)=>{const n=G("n-form-item-gi");return J(),Y("div",te,[t(o(_),{vertical:"",size:"large"},{default:i(()=>[t(o(M),{class:"greeting-card"},{default:i(()=>[d("div",re,[d("div",oe,[t(o(O),{label:a.$t("dashboardPrescription.currentlyViewing"),value:`${a.$t("dashboardPrescription.viewing")} ${C.value}`},null,8,["label","value"]),d("div",le,c(a.$t("dashboardPrescription.prescriptionRefreshNote")),1)]),d("div",ie,[d("div",se,[d("span",ne,c(a.$t("dashboardPrescription.needHelp")),1),d("ul",de,[d("li",null,[m(c(a.$t("dashboardPrescription.phone"))+": ",1),e[15]||(e[15]=d("a",{href:"tel:+11231231233"},"832-939-8137",-1))]),e[16]||(e[16]=d("li",null,"Fax: 832 939 8128",-1))])])])])]),_:1}),t(o(M),null,{default:i(()=>[t(o(_),{justify:"space-between",align:"center",style:{"margin-bottom":"16px"}},{default:i(()=>[t(o(p),{value:g.value,"onUpdate:value":e[0]||(e[0]=l=>g.value=l),placeholder:"Search prescriptions or patients...",clearable:"",style:{"max-width":"300px"}},null,8,["value"]),t(o(_),{justify:"space-between",align:"center"},{default:i(()=>[t(o(h),{type:"primary",onClick:e[1]||(e[1]=l=>a.$router.push("/dashboard/doctors"))},{default:i(()=>[m(c(a.$t("dashboardPrescription.goBack")),1)]),_:1}),t(o(h),{type:"primary",onClick:V},{default:i(()=>[m(c(a.$t("dashboardPrescription.addPrescription")),1)]),_:1})]),_:1})]),_:1}),d("div",ue,[d("div",ce,[t(o(W),{columns:T,data:S.value,bordered:!0,loading:$.value,class:"prescription-table"},null,8,["data","loading"])])]),t(o(_),{justify:"end",style:{"margin-top":"16px"}},{default:i(()=>[t(o(X),{page:v.value,"onUpdate:page":[e[2]||(e[2]=l=>v.value=l),e[4]||(e[4]=l=>{v.value=l,b()})],"page-size":P.value,"item-count":D.value,"show-size-picker":"","page-sizes":[5,10,20],"onUpdate:pageSize":e[3]||(e[3]=l=>{P.value=l,v.value=1,b()})},null,8,["page","page-size","item-count"])]),_:1})]),_:1}),t(o(Z),{show:f.value,"onUpdate:show":e[14]||(e[14]=l=>f.value=l),preset:"card",style:{width:"500px"}},{header:i(()=>[d("h2",null,c(r.value.id?a.$t("dashboardPrescription.editPrescription"):a.$t("dashboardPrescription.createPrescription")),1)]),default:i(()=>[t(o(q),null,{default:i(()=>[t(o(k),{cols:24,"x-gap":12},{default:i(()=>[t(n,{span:12,label:a.$t("dashboardPrescription.patientName")},{default:i(()=>[t(o(p),{value:r.value.patient_name,"onUpdate:value":e[5]||(e[5]=l=>r.value.patient_name=l),placeholder:a.$t("dashboardPrescription.patientName")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(n,{span:12,label:a.$t("dashboardPrescription.dob")},{default:i(()=>[t(o(z),{value:r.value.date_of_birth,"onUpdate:value":e[6]||(e[6]=l=>r.value.date_of_birth=l),type:"date","value-format":"yyyy-MM-dd",placeholder:a.$t("dashboardPrescription.dobPlaceHolder"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(o(k),{cols:24,"x-gap":12},{default:i(()=>[t(n,{span:12,label:a.$t("dashboardPrescription.prescriptionName")},{default:i(()=>[t(o(p),{value:r.value.name,"onUpdate:value":e[7]||(e[7]=l=>r.value.name=l),placeholder:a.$t("dashboardPrescription.prescriptionName")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(n,{span:12,label:"Source"},{default:i(()=>[t(o(p),{value:r.value.source,"onUpdate:value":e[8]||(e[8]=l=>r.value.source=l),placeholder:a.$t("dashboardPrescription.source")},null,8,["value","placeholder"])]),_:1})]),_:1}),t(o(k),{cols:24,"x-gap":12},{default:i(()=>[t(n,{span:12,label:a.$t("dashboardPrescription.insurance")},{default:i(()=>[t(o(p),{value:r.value.insurance,"onUpdate:value":e[9]||(e[9]=l=>r.value.insurance=l),placeholder:a.$t("dashboardPrescription.insurance")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(n,{span:12,label:a.$t("dashboardPrescription.city")},{default:i(()=>[t(o(p),{value:r.value.city,"onUpdate:value":e[10]||(e[10]=l=>r.value.city=l),placeholder:a.$t("dashboardPrescription.city")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(o(I),{label:a.$t("dashboardPrescription.status")},{default:i(()=>[t(o(p),{value:r.value.status,"onUpdate:value":e[11]||(e[11]=l=>r.value.status=l),placeholder:a.$t("dashboardPrescription.status"),type:"textarea",autosize:{minRows:3,maxRows:6},style:{"min-height":"100px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),t(o(I),{label:a.$t("dashboardPrescription.arrivedToOffice")},{default:i(()=>[t(o(z),{value:r.value.arrived_to_office_date,"onUpdate:value":e[12]||(e[12]=l=>r.value.arrived_to_office_date=l),type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:a.$t("dashboardPrescription.dobPlaceHolder"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"]),t(o(_),{justify:"end",class:"mt-4"},{default:i(()=>[t(o(h),{onClick:e[13]||(e[13]=l=>f.value=!1)},{default:i(()=>[m(c(a.$t("dashboardPrescription.cancel")),1)]),_:1}),t(o(h),{type:"primary",onClick:H},{default:i(()=>[m(c(a.$t("dashboardPrescription.save")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])]),_:1})])}}},me=ae(pe,[["__scopeId","data-v-a1ee69a5"]]);export{me as default};
