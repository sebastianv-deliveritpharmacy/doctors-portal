import{t as E,r as d,v as B,e as F,c as R,i as r,w as l,u as t,q as U,g as C,o as L,x as M,y as g,z as _,A as b,C as y,k as q,a as z,D as K,m as c,B as k}from"./index-BHWUVyN0.js";import{i as V}from"./axios-Ddd_rRZT.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const i="http://142.93.198.136:8000/api",A={register:`${i}/register`,login:`${i}/login`,logout:`${i}/logout`,users:{list:`${i}/users`,create:`${i}/users`,detail:n=>`${i}/users/${n}`,update:n=>`${i}/users/${n}`,delete:n=>`${i}/users/${n}`}},D={class:"login-container"},O={style:{display:"flex","justify-content":"space-between"}},T={__name:"LoginForm",setup(n){const S=E(),I=d(null),f=B(),$=d(!1),m=d(!1),a=d({email:"",password:""}),h={email:[{required:!0,message:"Please input your email",trigger:["input","blur"]},{type:"email",message:"Please enter a valid email address",trigger:["input","blur"]}],password:[{required:!0,message:"Please input your password",trigger:["input","blur"]},{min:6,message:"Password must be at least 6 characters",trigger:["input","blur"]}]},v=C(),x=async()=>{var u,e,o,w;try{const s=await V.post(A.login,{email:a.value.email,password:a.value.password});m.value?(localStorage.setItem("remember_me_email",a.value.email),localStorage.setItem("remember_me_password",a.value.password),localStorage.setItem("remember_me","true")):(localStorage.removeItem("remember_me_email"),localStorage.removeItem("remember_me_password"),localStorage.removeItem("remember_me")),s.data.two_factor_required?(localStorage.setItem("2fa_user_id",s.data.user_id),v.push("/verify-2fa")):(localStorage.setItem("access_token",s.data.token),S.setUser(s.data.user),v.push("/dashboard"))}catch(s){let p="Login failed, please check your credentials";if((e=(u=s==null?void 0:s.response)==null?void 0:u.data)!=null&&e.errors){const P=Object.keys(s.response.data.errors)[0];p=s.response.data.errors[P][0]}else(w=(o=s==null?void 0:s.response)==null?void 0:o.data)!=null&&w.message&&(p=s.response.data.message);f.error(p)}},N=()=>{f.info("Password reset functionality would go here")};return F(()=>{const u=localStorage.getItem("remember_me_email"),e=localStorage.getItem("remember_me_password");u&&e&&(a.value.email=u,a.value.password=e,m.value=!0)}),(u,e)=>(L(),R("div",D,[r(t(U),{title:"Login",hoverable:"",class:"login-card"},{default:l(()=>[r(t(M),{ref_key:"formRef",ref:I,model:a.value,rules:h,size:"large",onSubmit:g(x,["prevent"])},{default:l(()=>[r(t(_),{path:"email",label:"Email"},{default:l(()=>[r(t(b),{value:a.value.email,"onUpdate:value":e[0]||(e[0]=o=>a.value.email=o),placeholder:"Enter your email",onKeydown:e[1]||(e[1]=y(g(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),r(t(_),{path:"password",label:"Password"},{default:l(()=>[r(t(b),{value:a.value.password,"onUpdate:value":e[2]||(e[2]=o=>a.value.password=o),type:"password",placeholder:"Enter your password","show-password-on":"click",onKeydown:e[3]||(e[3]=y(g(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),r(t(q),{vertical:"",size:24},{default:l(()=>[z("div",O,[r(t(K),{checked:m.value,"onUpdate:checked":e[4]||(e[4]=o=>m.value=o)},{default:l(()=>e[5]||(e[5]=[c("Remember me")])),_:1},8,["checked"]),r(t(k),{text:"",onClick:N},{default:l(()=>e[6]||(e[6]=[c(" Forgot password? ")])),_:1})]),r(t(k),{type:"primary",size:"large",block:!0,loading:$.value,"attr-type":"submit",style:{"background-color":"#2080f0"}},{default:l(()=>e[7]||(e[7]=[c(" Sign in ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1})]))}},Q=j(T,[["__scopeId","data-v-2b6c3ffb"]]);export{Q as default};
