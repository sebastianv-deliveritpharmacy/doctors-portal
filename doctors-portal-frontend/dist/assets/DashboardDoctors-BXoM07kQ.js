import{i as y}from"./axios-Ddd_rRZT.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{d as j,c as V,o as A,a as U,r as n,v as R,V as O,W as z,E as D,e as J,f as W,w as o,u as l,q as G,i as t,k as h,A as c,B as v,m as _,R as H,S as K,s as Q,x as X,z as k,J as Y,F as C}from"./index-BHWUVyN0.js";const Z={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ee=j({name:"AlertCircleOutline",render:function(f,d){return A(),V("svg",Z,d[0]||(d[0]=[U("path",{d:"M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"},null,-1),U("path",{d:"M250.26 166.05L256 288l5.73-121.95a5.74 5.74 0 0 0-5.79-6h0a5.74 5.74 0 0 0-5.68 6z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),U("path",{d:"M256 367.91a20 20 0 1 1 20-20a20 20 0 0 1-20 20z",fill:"currentColor"},null,-1)]))}}),ae={class:"text-lg font-bold m-0"},se={__name:"DashboardDoctors",setup(F){const f=n([]),d=n(!1),i=n(!1),b=n(!1),p=R(),P=O(),N=n(null),m=n(null),r=n({name:"",email:"",password:"",password_confirmation:""}),L={name:[{required:!0,message:"Name is required",trigger:["input","blur"]}],email:[{required:!0,message:"Email is required",trigger:["input","blur"]},{type:"email",message:"Invalid email",trigger:["input","blur"]}],password:[{required:!0,min:6,message:"Password must be at least 6 characters",trigger:["input","blur"]}],password_confirmation:[{validator:(a,e)=>e===r.value.password,message:"Passwords do not match",trigger:["input","blur"]}]},M=[{title:"Name",key:"name"},{title:"Email",key:"email"},{title:"Actions",key:"actions",render(a){return C("div",{style:"display: flex; gap: 8px;"},[C(v,{size:"small",type:"info",secondary:!0,onClick:()=>E(a)},{default:()=>"Edit"}),C(v,{size:"small",type:"error",secondary:!0,onClick:()=>S(a.id)},{default:()=>"Delete"})])}}],x=async()=>{try{d.value=!0;const a=await y.get("/users");f.value=a.data.filter(e=>e.is_admin===0)}catch{p.error("Failed to load users")}finally{d.value=!1}},B=async()=>{var a;try{await((a=N.value)==null?void 0:a.validate()),b.value=!0;const e={name:r.value.name,email:r.value.email,...r.value.password?{password:r.value.password,password_confirmation:r.value.password_confirmation}:{}};m.value?(await y.put(`/users/${m.value}`,e),p.success("User updated successfully!")):(await y.post("/users",{...e,is_admin:!1}),p.success("User added successfully!")),i.value=!1,x()}catch{p.error("Failed to save user")}finally{b.value=!1}},E=a=>{m.value=a.id,r.value={name:a.name,email:a.email,password:"",password_confirmation:""},i.value=!0},S=a=>{P.warning({title:"Delete User",content:"Are you sure you want to delete this user? This action cannot be undone.",positiveText:"Delete",negativeText:"Cancel",positiveButtonProps:{type:"error"},icon:()=>C(ee,{style:"color: red; font-size: 22px;"}),onPositiveClick:async()=>{try{await y.delete(`/users/${a}`),p.success("User deleted successfully!"),x()}catch{p.error("Failed to delete user")}}})},q=()=>{r.value={name:"",email:"",password:"",password_confirmation:""},m.value=null};z(i,a=>{a||q()});const u=n(""),w=n(1),g=n(5),T=D(()=>{const a=f.value.filter(s=>s.name.toLowerCase().includes(u.value.toLowerCase())||s.email.toLowerCase().includes(u.value.toLowerCase())),e=(w.value-1)*g.value;return a.slice(e,e+g.value)}),I=D(()=>f.value.filter(a=>a.name.toLowerCase().includes(u.value.toLowerCase())||a.email.toLowerCase().includes(u.value.toLowerCase())).length);return z(u,()=>{w.value=1}),J(x),(a,e)=>(A(),W(l(G),{title:"Manage Doctors"},{default:o(()=>[t(l(h),{justify:"space-between",align:"center",class:"mb-4"},{default:o(()=>[t(l(c),{value:u.value,"onUpdate:value":e[0]||(e[0]=s=>u.value=s),placeholder:"Search doctors...",clearable:"",style:{"max-width":"300px"}},null,8,["value"]),t(l(v),{type:"primary",onClick:e[1]||(e[1]=s=>i.value=!0)},{default:o(()=>e[10]||(e[10]=[_(" Add Doctor ")])),_:1})]),_:1}),t(l(H),{columns:M,data:T.value,loading:d.value,bordered:!0,striped:""},null,8,["data","loading"]),t(l(h),{justify:"end",class:"mt-4"},{default:o(()=>[t(l(K),{page:w.value,"onUpdate:page":e[2]||(e[2]=s=>w.value=s),"page-size":g.value,"onUpdate:pageSize":e[3]||(e[3]=s=>g.value=s),"item-count":I.value,"show-size-picker":"","page-sizes":[5,10,20]},null,8,["page","page-size","item-count"])]),_:1}),t(l(Q),{show:i.value,"onUpdate:show":e[9]||(e[9]=s=>i.value=s),preset:"card",style:{width:"500px"}},{header:o(()=>[U("h2",ae,Y(m.value?"Edit Doctor":"Add New Doctor"),1)]),default:o(()=>[t(l(X),{ref_key:"addUserFormRef",ref:N,model:r.value,rules:L,"label-width":"120px",size:"large"},{default:o(()=>[t(l(k),{label:"Name",path:"name"},{default:o(()=>[t(l(c),{value:r.value.name,"onUpdate:value":e[4]||(e[4]=s=>r.value.name=s),placeholder:"User name"},null,8,["value"])]),_:1}),t(l(k),{label:"Email",path:"email"},{default:o(()=>[t(l(c),{value:r.value.email,"onUpdate:value":e[5]||(e[5]=s=>r.value.email=s),placeholder:"User email"},null,8,["value"])]),_:1}),t(l(k),{label:"Password",path:"password"},{default:o(()=>[t(l(c),{value:r.value.password,"onUpdate:value":e[6]||(e[6]=s=>r.value.password=s),type:"password",placeholder:"Password","show-password-on":"click"},null,8,["value"])]),_:1}),t(l(k),{label:"Confirm Password",path:"password_confirmation"},{default:o(()=>[t(l(c),{value:r.value.password_confirmation,"onUpdate:value":e[7]||(e[7]=s=>r.value.password_confirmation=s),type:"password",placeholder:"Confirm Password","show-password-on":"click"},null,8,["value"])]),_:1}),t(l(h),{justify:"end",class:"mt-6"},{default:o(()=>[t(l(v),{onClick:e[8]||(e[8]=s=>i.value=!1)},{default:o(()=>e[11]||(e[11]=[_("Cancel")])),_:1}),t(l(v),{type:"primary",loading:b.value,onClick:B},{default:o(()=>e[12]||(e[12]=[_(" Save ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])]),_:1}))}},oe=$(se,[["__scopeId","data-v-b16524db"]]);export{oe as default};
