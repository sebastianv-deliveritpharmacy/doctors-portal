import{i as d}from"./axios-D3XPDuSg.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{v as h,r as u,e as k,f as p,w as s,u as r,q as x,o as v,i as n,x as D,a as I,z as m,A as _,k as q,I as B,B as g,m as y,K as F}from"./index-YwPUcaLV.js";const V={__name:"DashboardSettings",setup(K){const i=h(),f=u(null),e=u({client_id:"",secret:""}),l=u(!1),o=u(!1),C={client_id:[{required:!0,message:"Client ID is required",trigger:["input","blur"]}],secret:[{required:!0,message:"Secret is required",trigger:["input","blur"]}]},b=async()=>{try{const a=await d.get("/caretend-credential");a.data&&(e.value={client_id:a.data.client_id,secret:a.data.secret},l.value=!0)}catch{l.value=!1}},w=async()=>{var a;try{await((a=f.value)==null?void 0:a.validate()),o.value=!0,l.value?(await d.put("/caretend-credential",e.value),i.success("Credential updated")):(await d.post("/caretend-credential",e.value),i.success("Credential saved"),l.value=!0)}catch{i.error("Failed to save credential")}finally{o.value=!1}},S=async()=>{try{await d.delete("/caretend-credential"),e.value={client_id:"",secret:""},l.value=!1,i.success("Credential deleted")}catch{i.error("Failed to delete credential")}};return k(b),(a,t)=>(v(),p(r(x),{title:"Settings"},{default:s(()=>[n(r(D),{model:e.value,rules:C,"label-width":"120px",size:"large",ref_key:"formRef",ref:f},{default:s(()=>[t[3]||(t[3]=I("h3",null,"CareTend API",-1)),n(r(m),{label:"Client ID",path:"client_id"},{default:s(()=>[n(r(_),{value:e.value.client_id,"onUpdate:value":t[0]||(t[0]=c=>e.value.client_id=c),placeholder:"Enter Client ID"},null,8,["value"])]),_:1}),n(r(m),{label:"Secret Key",path:"secret"},{default:s(()=>[n(r(_),{value:e.value.secret,"onUpdate:value":t[1]||(t[1]=c=>e.value.secret=c),type:"password",placeholder:"Enter Secret Key","show-password-on":"click"},null,8,["value"])]),_:1}),n(r(q),{justify:"end",class:"mt-4"},{default:s(()=>[n(r(g),{loading:o.value,type:"primary",onClick:w},{default:s(()=>[y(F(l.value?"Update":"Save"),1)]),_:1},8,["loading"]),l.value?(v(),p(r(g),{key:0,type:"error",secondary:"",onClick:S},{default:s(()=>t[2]||(t[2]=[y(" Delete ")])),_:1,__:[2]})):B("",!0)]),_:1})]),_:1,__:[3]},8,["model"])]),_:1}))}},E=N(V,[["__scopeId","data-v-bbab3c72"]]);export{E as default};
