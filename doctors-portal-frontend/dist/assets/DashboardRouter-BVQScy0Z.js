import{I as x,u as w,r as h,c as m,o as v,j as u,g as c,L as j,H as N,i as E,e as T,a,t as _,M as P,O,P as V,Q as H,f as U,R as z,y as R,S as Z,w as y,s as A,T as J,n as W,l as S,D as q,U as G,V as K,x as Q}from"./index-CaOXgG-J.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{i as M}from"./axios-D3XPDuSg.js";import{f as X}from"./shipment-CREcLUiF.js";/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Y=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,o,t)=>t?t.toUpperCase():o.toLowerCase()),ee=i=>{const e=Y(i);return e.charAt(0).toUpperCase()+e.slice(1)},te=(...i)=>i.filter((e,o,t)=>!!e&&e.trim()!==""&&t.indexOf(e)===o).join(" ").trim();/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var k={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=({size:i,strokeWidth:e=2,absoluteStrokeWidth:o,color:t,iconNode:g,name:p,class:n,...l},{slots:r})=>x("svg",{...k,width:i||k.width,height:i||k.height,stroke:t||k.stroke,"stroke-width":o?Number(e)*24/Number(i):e,class:te("lucide",...p?[`lucide-${B(ee(p))}-icon`,`lucide-${B(p)}`]:["lucide-icon"]),...l},[...g.map(b=>x(...b)),...r.default?[r.default()]:[]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=(i,e)=>(o,{slots:t})=>x(ae,{...o,iconNode:e,name:i},t);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=$("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=$("shopping-bag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-vue-next v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=$("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),ne={class:"chart-wrapper"},ie={__name:"ChartComponent",setup(i){const e=j,{t:o}=w(),t=h([{name:o("chart.orders"),type:"area",data:[55,62,48,44,70,52,61,50]},{name:o("chart.earnings"),type:"bar",data:[80,85,60,30,90,45,85,40]},{name:o("chart.refunds"),type:"line",data:[20,18,12,10,11,25,15,30]}]),g=h({chart:{height:300,type:"line",stacked:!1,toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}}},stroke:{width:[2,0,2],curve:"smooth",dashArray:[0,0,6]},fill:{opacity:[.2,1,1],type:["solid","solid","solid"]},colors:["#3347FF","#00B894","#FF5C5C"],plotOptions:{bar:{columnWidth:"40%",borderRadius:4}},dataLabels:{enabled:!1},markers:{size:0},xaxis:{categories:["May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{style:{colors:"#888"}}},yaxis:{labels:{style:{colors:"#888"}}},grid:{borderColor:"#eee",xaxis:{lines:{show:!1}}},legend:{position:"bottom",horizontalAlign:"center",markers:{width:10,height:10,radius:50}},tooltip:{shared:!0,intersect:!1,theme:"light"}});return(p,n)=>(v(),m("div",ne,[u(c(e),{type:"line",height:"300",options:g.value,series:t.value},null,8,["options","series"])]))}},le=C(ie,[["__scopeId","data-v-d1a35913"]]),ce={class:"center-chart"},de={__name:"PieChart",setup(i){const{t:e}=w(),o=h([44,55,41,17]),t=N(()=>({chart:{id:"apexchart-example"},title:{text:e("pieChart.title"),align:"center",margin:40,style:{fontSize:"20px",fontWeight:"bold",color:"#263238"}},colors:["#2E93fA","#46DA62","#242E8A","#E91E63"],dataLabels:{enabled:!0},legend:{show:!0,position:"bottom"},labels:["Lisinopril","Levotiroxina","Atorvastatina","Metformina"]}));return(g,p)=>{const n=E("apexchart");return v(),m("div",ce,[u(n,{width:"600",type:"pie",options:t.value,series:o.value},null,8,["options","series"])])}}},ue=C(de,[["__scopeId","data-v-87da7ea1"]]),I=()=>M.get("/user"),he=()=>M.get("/dashboard/stats"),pe={class:"dashboard-container"},_e={class:"greeting-card"},ge={class:"greeting-text"},fe={class:"subtext"},ve={class:"stats-overview"},me={class:"card-top"},be={class:"stat-title"},ye={class:"stat-value"},ke={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"white",viewBox:"0 0 24 24",width:"20",height:"20"},xe=["href"],we={class:"chart-card"},Ce={__name:"DashboardAdmin",setup(i){const{t:e}=w(),o=h({name:"",email:""}),t=h([{title:e("dashboard.cards.doctors.title"),value:0,change:0,icon:re,iconBg:"#00B140",link:"#",linkText:e("dashboard.cards.doctors.linkText")},{title:e("dashboard.cards.prescriptions.title"),value:0,change:0,icon:oe,iconBg:"#0073e6",link:"#",linkText:e("dashboard.cards.prescriptions.linkText")},{title:e("dashboard.cards.completed.title"),value:0,change:0,icon:"checkmark",iconBg:"#f59e0b",link:"#",linkText:e("dashboard.cards.completed.linkText")},{title:e("dashboard.cards.month.title"),value:0,change:0,icon:se,iconBg:"#9b59b6",link:"#",linkText:e("dashboard.cards.month.linkText")}]),g=async()=>{try{const n=await I();o.value=n.data}catch(n){console.error("Failed to fetch user",n)}},p=async()=>{try{const l=(await he()).data;t.value[0].value=l.active_doctors.count,t.value[0].change=l.active_doctors.change,t.value[1].value=l.prescriptions_today.count,t.value[1].change=l.prescriptions_today.change,t.value[2].value=l.completed_today.count,t.value[2].change=l.completed_today.change,t.value[3].value=l.this_month.count,t.value[3].change=l.this_month.change}catch(n){console.error("Failed to load dashboard stats",n)}};return T(()=>{localStorage.getItem("access_token")&&(g(),p())}),(n,l)=>(v(),m("div",pe,[a("div",_e,[a("h2",ge,_(n.$t("dashboard.greeting",{name:o.value.name})),1),a("div",fe,_(n.$t("dashboard.subtext")),1),a("div",ve,[(v(!0),m(P,null,O(t.value,r=>(v(),m("div",{key:r.title,class:"stat-card"},[a("div",me,[a("div",null,[a("div",be,_(r.title),1),a("div",ye,_(r.value),1),a("div",{class:V(["stat-change",{positive:r.change>0,negative:r.change<0,neutral:r.change===0}])},_(r.change>0?"↑":r.change<0?"↓":"+")+" "+_(Math.abs(r.change).toFixed(2))+"% ",3)]),a("div",{class:"stat-icon",style:H({backgroundColor:r.iconBg})},[r.icon==="checkmark"?(v(),m("svg",ke,l[0]||(l[0]=[a("path",{d:"M9 16.17l-3.88-3.88L4 13.41l5 5 9-9-1.41-1.41z"},null,-1)]))):(v(),U(z(r.icon),{key:1,class:"icon"}))],4)]),a("a",{href:r.link,class:"stat-link"},_(r.linkText),9,xe)]))),128))])]),a("div",we,[u(le),u(ue)])]))}},De=C(Ce,[["__scopeId","data-v-395588ce"]]),Se={class:"dashboard-container"},$e={class:"greeting-card-content"},Ae={class:"greeting-left"},Be={class:"subtext"},Ne={class:"greeting-right"},Te={class:"help-container"},Ue={class:"help-title"},ze={class:"help-list"},Me={class:"table-container"},Ie={class:"table-responsive"},Le={__name:"DashboardUser",setup(i){const{t:e}=w(),o=R(),t=h({name:"",email:""}),g=h([]),p=h(!1),n=h(1),l=h(20),r=h(0),b=h(""),L=async()=>{try{const d=await I();t.value=d.data}catch(d){console.error("Failed to fetch user",d),o.error(e("userDash.errors.fetchUser"))}},D=async()=>{try{p.value=!0;const d=await X(n.value,l.value,b.value);g.value=d.data.data.map(s=>({id:s.id,name:s.prescription_name||"-",status:s.status||"unknown",patient_name:s.patient_name||"-",date_of_birth:s.date_of_birth||"-",insurance:s.insurance||"-",city:s.city||"-",source:s.source||"-",arrived_to_office_date:s.arrived_to_office_date||"-",shipment_id:s.shipment_id||"-"})),r.value=d.data.total}catch(d){console.error("Error fetching shipments:",d),o.error(e("userDash.errors.loadShipments"))}finally{p.value=!1}};T(()=>{localStorage.getItem("access_token")&&(L(),D())});const F=N(()=>[{title:e("userDash.table.patient"),key:"patient_name",width:150},{title:e("userDash.table.prescription"),key:"name",width:150},{title:e("userDash.table.dob"),key:"date_of_birth",className:"hide-on-mobile",width:120},{title:e("userDash.table.insurance"),key:"insurance",className:"hide-on-mobile",width:150},{title:e("userDash.table.city"),key:"city",className:"hide-on-mobile",width:120},{title:e("userDash.table.source"),key:"source",className:"hide-on-mobile",width:120},{title:e("userDash.table.arrived"),key:"arrived_to_office_date",render:d=>d.arrived_to_office_date?new Date(d.arrived_to_office_date).toLocaleDateString():"-",width:120},{title:e("userDash.table.status"),key:"status",render:d=>{const s={confirmed_prescription_received:{label:e("statuses.confirmed"),color:"#e6f7ff",textColor:"#1890ff"},data_entry:{label:e("statuses.dataEntry"),color:"#f6ffed",textColor:"#52c41a"},intake_processing:{label:e("statuses.intake"),color:"#fff7e6",textColor:"#fa8c16"},insurance_verification:{label:e("statuses.insuranceVerification"),color:"#fff1f0",textColor:"#f5222d"},copay_assistant:{label:e("statuses.copay"),color:"#f6faff",textColor:"#096dd9"},production:{label:e("statuses.production"),color:"#f9f0ff",textColor:"#722ed1"},collecting_copay:{label:e("statuses.collecting"),color:"#fff0f6",textColor:"#c41d7f"},delivery_confirmation:{label:e("statuses.delivered"),color:"#e6fffb",textColor:"#13c2c2"},default:{label:e("statuses.unknown"),color:"#f0f0f0",textColor:"#595959"}},f=s[d.status]||s.default;return x(Z,{style:{backgroundColor:f.color,color:f.textColor,fontWeight:"500",padding:"0 8px",whiteSpace:"nowrap"},bordered:!1},{default:()=>f.label})},width:120}]);return(d,s)=>(v(),m("div",Se,[u(c(S),{vertical:"",size:"large"},{default:y(()=>[u(c(A),{class:"greeting-card"},{default:y(()=>[a("div",$e,[a("div",Ae,[u(c(J),{label:"",value:c(e)("userDash.greeting",{name:t.value.name||""})},null,8,["value"]),a("div",Be,_(c(e)("userDash.subtext")),1)]),a("div",Ne,[a("div",Te,[a("span",Ue,_(c(e)("userDash.needHelp")),1),a("ul",ze,[a("li",null,[W(_(c(e)("userDash.phone"))+": ",1),s[3]||(s[3]=a("a",{href:"tel:+18329398137"},"832-939-8137",-1))]),a("li",null,_(c(e)("userDash.fax"))+": 832 939 8128",1)])])])])]),_:1}),u(c(A),null,{default:y(()=>[u(c(S),{justify:"space-between",align:"center",style:{"margin-bottom":"16px"}},{default:y(()=>[u(c(q),{value:b.value,"onUpdate:value":s[0]||(s[0]=f=>b.value=f),placeholder:c(e)("userDash.searchPlaceholder"),clearable:"",style:{"max-width":"300px"}},null,8,["value","placeholder"])]),_:1}),a("div",Me,[a("div",Ie,[u(c(G),{columns:F.value,data:g.value,bordered:!0,loading:p.value,class:"prescription-table"},null,8,["columns","data","loading"])])]),u(c(S),{justify:"end",style:{"margin-top":"16px"}},{default:y(()=>[u(c(K),{page:n.value,"onUpdate:page":[s[1]||(s[1]=f=>n.value=f),D],"page-size":l.value,"item-count":r.value,"show-size-picker":"","page-sizes":[5,10,20],"onUpdate:pageSize":s[2]||(s[2]=f=>{l.value=f,n.value=1,D()})},null,8,["page","page-size","item-count"])]),_:1})]),_:1})]),_:1})]))}},Fe=C(Le,[["__scopeId","data-v-3b3b4806"]]),Ve={__name:"DashboardRouter",setup(i){const e=Q();return(o,t)=>(v(),U(z(c(e).isAdmin()?De:Fe)))}};export{Ve as default};
