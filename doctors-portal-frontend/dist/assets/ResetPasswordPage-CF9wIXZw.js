import{r as d,y as b,e as P,J as k,c as R,j as r,w as t,g as o,s as q,h as N,o as h,z as E,A as u,C as p,D as m,E as w,B as x,n as C}from"./index-4FCvwASn.js";import{i as B}from"./axios-D3XPDuSg.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"reset-container"},M={__name:"ResetPasswordPage",setup(S){const l=k(),g=N(),v=d(null),f=b(),i=d(!1),s=d({email:"",password:"",password_confirmation:""}),c={email:[{required:!0,message:"Email is required",trigger:["input","blur"]},{type:"email",message:"Invalid email",trigger:["input","blur"]}],password:[{required:!0,message:"Password is required",trigger:["input","blur"]},{min:6,message:"Password must be at least 6 characters",trigger:["input","blur"]}],password_confirmation:[{required:!0,message:"Please confirm your password",trigger:["input","blur"]},{validator:(n,e)=>e===s.value.password,message:"Passwords do not match",trigger:["input","blur"]}]};P(()=>{l.query.email&&(s.value.email=String(l.query.email))});const y=async()=>{var n,e;i.value=!0;try{const a=(l.query.token??l.params.token)||"";await B.post("/reset-password",{token:a,email:s.value.email,password:s.value.password,password_confirmation:s.value.password_confirmation}),f.success("Password reset successfully. You can now log in."),g.push("/login")}catch(a){const _=((e=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:e.message)||"Something went wrong";f.error(_)}finally{i.value=!1}};return(n,e)=>(h(),R("div",K,[r(o(q),{title:"Reset Password",hoverable:"",class:"reset-card"},{default:t(()=>[r(o(E),{ref_key:"formRef",ref:v,model:s.value,rules:c,size:"large",onSubmit:u(y,["prevent"])},{default:t(()=>[r(o(p),{path:"email",label:"Email"},{default:t(()=>[r(o(m),{value:s.value.email,"onUpdate:value":e[0]||(e[0]=a=>s.value.email=a),placeholder:"Enter your email",onKeydown:e[1]||(e[1]=w(u(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),r(o(p),{path:"password",label:"New Password"},{default:t(()=>[r(o(m),{value:s.value.password,"onUpdate:value":e[2]||(e[2]=a=>s.value.password=a),type:"password",placeholder:"Enter new password","show-password-on":"click",onKeydown:e[3]||(e[3]=w(u(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),r(o(p),{path:"password_confirmation",label:"Confirm Password"},{default:t(()=>[r(o(m),{value:s.value.password_confirmation,"onUpdate:value":e[4]||(e[4]=a=>s.value.password_confirmation=a),type:"password",placeholder:"Confirm new password","show-password-on":"click",onKeydown:e[5]||(e[5]=w(u(()=>{},["prevent"]),["enter"]))},null,8,["value"])]),_:1}),r(o(x),{type:"primary",loading:i.value,"attr-type":"submit",block:"",style:{"background-color":"#2080f0"}},{default:t(()=>e[6]||(e[6]=[C(" Reset Password ")])),_:1,__:[6]},8,["loading"])]),_:1},8,["model"])]),_:1})]))}},F=I(M,[["__scopeId","data-v-7442e800"]]);export{F as default};
