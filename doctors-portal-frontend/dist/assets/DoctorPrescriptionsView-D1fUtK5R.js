import{u as j,y as F,J as x,r as u,X as R,e as A,I as w,S as L,B as h,c as Y,j as t,w as s,g as o,l as _,i as G,o as J,s as M,a as d,T as O,t as c,n as m,D as p,U as W,V as X,v as Z,z as q,Y as k,Z as z,C as I}from"./index-W4O6NDwM.js";import{a as K,u as Q,c as ee}from"./shipment-CREcLUiF.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./axios-D3XPDuSg.js";const te={class:"dashboard-container"},re={class:"greeting-card-content"},oe={class:"greeting-left"},le={class:"subtext"},ie={class:"greeting-right"},se={class:"help-container"},ne={class:"help-title"},de={class:"help-list"},ue={class:"table-container"},ce={class:"table-responsive"},pe={__name:"DoctorPrescriptionsView",setup(fe){const{t:n}=j(),B=x(),y=F(),N=B.params.id,C=u("Doctor"),S=u([]),D=u(0),f=u(!1),r=u({id:null,name:"",status:"",patient_name:"",date_of_birth:null,insurance:"",city:"",source:"",arrived_to_office_date:null,arrived_to_office_time:""}),$=u(!1),g=u(""),v=u(1),P=u(10);R([g,v,P],()=>{b()}),n("dashboardPrescription.confirmed"),n("dashboardPrescription.dataEntry"),n("dashboardPrescription.intake"),n("dashboardPrescription.insuranceVerification"),n("dashboardPrescription.copay"),n("dashboardPrescription.production"),n("dashboardPrescription.collecting"),n("dashboardPrescription.delivered");const V=()=>{r.value={id:null,name:"",status:"",patient_name:"",date_of_birth:null,insurance:"",city:"",source:"",arrived_to_office_date:null,arrived_to_office_time:""},f.value=!0},E=e=>{r.value={...e},f.value=!0},H=async()=>{try{const e={user_id:N,patient_name:r.value.patient_name,prescription_name:r.value.name,status:r.value.status,date_of_birth:r.value.date_of_birth?U(r.value.date_of_birth):null,insurance:r.value.insurance,city:r.value.city,source:r.value.source,arrived_to_office_date:r.value.arrived_to_office_date?U(r.value.arrived_to_office_date):null};r.value.id?(await Q(r.value.id,e),y.success(n("dashboardPrescription.editShipment"))):(await ee(e),y.success(n("dashboardPrescription.addShipment"))),f.value=!1,b()}catch(e){console.error("Error saving shipment:",e),y.error(n("dashboardPrescription.errorShipment"))}},b=async()=>{try{$.value=!0;const e=await K(N,v.value,P.value,g.value);C.value=e.data.user_name||"Doctor";const a=e.data.data;S.value=a.data.map(i=>({id:i.id,name:i.prescription_name||"-",status:i.status||"unknown",patient_name:i.patient_name||"-",date_of_birth:i.date_of_birth||"-",insurance:i.insurance||"-",city:i.city||"-",source:i.source||"-",arrived_to_office_date:i.arrived_to_office_date||"-",arrived_to_office_time:i.arrived_to_office_time||"-"})),D.value=a.total}catch(e){console.error("Error fetching shipments:",e),y.error(n("dashboardPrescription.errorUploadShipment"))}finally{$.value=!1}};function U(e){if(!e)return null;const a=new Date(e),i=l=>l.toString().padStart(2,"0");return`${a.getFullYear()}-${i(a.getMonth()+1)}-${i(a.getDate())} ${i(a.getHours())}:${i(a.getMinutes())}:${i(a.getSeconds())}`}A(b);const T=[{title:n("dashboardPrescription.table.id"),key:"id",className:"hide-on-mobile",width:80},{title:n("dashboardPrescription.table.patient"),key:"patient_name",width:150},{title:n("dashboardPrescription.table.prescription"),key:"name",width:150},{title:n("dashboardPrescription.table.dob"),key:"date_of_birth",className:"hide-on-mobile",width:120,render:e=>e.date_of_birth||"-"},{title:n("dashboardPrescription.table.insurance"),key:"insurance",className:"hide-on-mobile",width:120},{title:n("dashboardPrescription.table.city"),key:"city",className:"hide-on-mobile",width:120},{title:n("dashboardPrescription.table.source"),key:"source",className:"hide-on-mobile",width:120},{title:n("dashboardPrescription.table.arrived"),key:"arrived_to_office_date",width:150,render:e=>e.arrived_to_office_date?new Date(e.arrived_to_office_date).toLocaleString():"-"},{title:n("dashboardPrescription.table.status"),key:"status",width:180,render:e=>{const a={confirmed_prescription_received:{label:"Confirmed",color:"#e6f7ff",textColor:"#1890ff"},data_entry:{label:"Data Entry",color:"#f6ffed",textColor:"#52c41a"},intake_processing:{label:"Intake",color:"#fff7e6",textColor:"#fa8c16"},insurance_verification:{label:"Insurance",color:"#fff1f0",textColor:"#f5222d"},copay_assistant:{label:"Co-pay",color:"#f6faff",textColor:"#096dd9"},production:{label:"Production",color:"#f9f0ff",textColor:"#722ed1"},collecting_copay:{label:"Collecting",color:"#fff0f6",textColor:"#c41d7f"},delivery_confirmation:{label:"Delivered",color:"#e6fffb",textColor:"#13c2c2"},default:{color:"#f0f0f0",textColor:"#595959"}},i=a[e.status]||{...a.default,label:e.status||"Unknown"};return w(L,{style:{backgroundColor:i.color,color:i.textColor,fontWeight:"500",padding:"0 8px",whiteSpace:"nowrap"},bordered:!1},{default:()=>i.label})}},{title:n("dashboardPrescription.table.actions"),key:"actions",width:100,render:e=>w("div",{style:"display: flex; gap: 8px;"},[w(h,{size:"small",type:"info",secondary:!0,onClick:()=>E(e)},{default:()=>n("dashboardPrescription.table.edit")})])}];return(e,a)=>{const i=G("n-form-item-gi");return J(),Y("div",te,[t(o(_),{vertical:"",size:"large"},{default:s(()=>[t(o(M),{class:"greeting-card"},{default:s(()=>[d("div",re,[d("div",oe,[t(o(O),{label:e.$t("dashboardPrescription.currentlyViewing"),value:`${e.$t("dashboardPrescription.viewing")} ${C.value}`},null,8,["label","value"]),d("div",le,c(e.$t("dashboardPrescription.prescriptionRefreshNote")),1)]),d("div",ie,[d("div",se,[d("span",ne,c(e.$t("dashboardPrescription.needHelp")),1),d("ul",de,[d("li",null,[m(c(e.$t("dashboardPrescription.phone"))+": ",1),a[15]||(a[15]=d("a",{href:"tel:+11231231233"},"832-939-8137",-1))]),a[16]||(a[16]=d("li",null,"Fax: 832 939 8128",-1))])])])])]),_:1}),t(o(M),null,{default:s(()=>[t(o(_),{justify:"space-between",align:"center",style:{"margin-bottom":"16px"}},{default:s(()=>[t(o(p),{value:g.value,"onUpdate:value":a[0]||(a[0]=l=>g.value=l),placeholder:"Search prescriptions or patients...",clearable:"",style:{"max-width":"300px"}},null,8,["value"]),t(o(_),{justify:"space-between",align:"center"},{default:s(()=>[t(o(h),{type:"primary",onClick:a[1]||(a[1]=l=>e.$router.push("/dashboard/doctors"))},{default:s(()=>[m(c(e.$t("dashboardPrescription.goBack")),1)]),_:1}),t(o(h),{type:"primary",onClick:V},{default:s(()=>[m(c(e.$t("dashboardPrescription.addPrescription")),1)]),_:1})]),_:1})]),_:1}),d("div",ue,[d("div",ce,[t(o(W),{columns:T,data:S.value,bordered:!0,loading:$.value,class:"prescription-table"},null,8,["data","loading"])])]),t(o(_),{justify:"end",style:{"margin-top":"16px"}},{default:s(()=>[t(o(X),{page:v.value,"onUpdate:page":[a[2]||(a[2]=l=>v.value=l),a[4]||(a[4]=l=>{v.value=l,b()})],"page-size":P.value,"item-count":D.value,"show-size-picker":"","page-sizes":[5,10,20],"onUpdate:pageSize":a[3]||(a[3]=l=>{P.value=l,v.value=1,b()})},null,8,["page","page-size","item-count"])]),_:1})]),_:1}),t(o(Z),{show:f.value,"onUpdate:show":a[14]||(a[14]=l=>f.value=l),preset:"card",style:{width:"500px"}},{header:s(()=>[d("h2",null,c(r.value.id?e.$t("dashboardPrescription.editPrescription"):e.$t("dashboardPrescription.createPrescription")),1)]),default:s(()=>[t(o(q),null,{default:s(()=>[t(o(k),{cols:24,"x-gap":12},{default:s(()=>[t(i,{span:12,label:e.$t("dashboardPrescription.patientName")},{default:s(()=>[t(o(p),{value:r.value.patient_name,"onUpdate:value":a[5]||(a[5]=l=>r.value.patient_name=l),placeholder:e.$t("dashboardPrescription.patientName")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(i,{span:12,label:e.$t("dashboardPrescription.dob")},{default:s(()=>[t(o(z),{value:r.value.date_of_birth,"onUpdate:value":a[6]||(a[6]=l=>r.value.date_of_birth=l),type:"date","value-format":"yyyy-MM-dd",placeholder:e.$t("dashboardPrescription.dobPlaceHolder"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(o(k),{cols:24,"x-gap":12},{default:s(()=>[t(i,{span:12,label:e.$t("dashboardPrescription.prescriptionName")},{default:s(()=>[t(o(p),{value:r.value.name,"onUpdate:value":a[7]||(a[7]=l=>r.value.name=l),placeholder:e.$t("dashboardPrescription.prescriptionName")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(i,{span:12,label:"Source"},{default:s(()=>[t(o(p),{value:r.value.source,"onUpdate:value":a[8]||(a[8]=l=>r.value.source=l),placeholder:e.$t("dashboardPrescription.source")},null,8,["value","placeholder"])]),_:1})]),_:1}),t(o(k),{cols:24,"x-gap":12},{default:s(()=>[t(i,{span:12,label:e.$t("dashboardPrescription.insurance")},{default:s(()=>[t(o(p),{value:r.value.insurance,"onUpdate:value":a[9]||(a[9]=l=>r.value.insurance=l),placeholder:e.$t("dashboardPrescription.insurance")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(i,{span:12,label:e.$t("dashboardPrescription.city")},{default:s(()=>[t(o(p),{value:r.value.city,"onUpdate:value":a[10]||(a[10]=l=>r.value.city=l),placeholder:e.$t("dashboardPrescription.city")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1}),t(o(I),{label:e.$t("dashboardPrescription.status")},{default:s(()=>[t(o(p),{value:r.value.status,"onUpdate:value":a[11]||(a[11]=l=>r.value.status=l),placeholder:e.$t("dashboardPrescription.status"),type:"textarea",autosize:{minRows:3,maxRows:6},style:{"min-height":"100px"}},null,8,["value","placeholder"])]),_:1},8,["label"]),t(o(I),{label:e.$t("dashboardPrescription.arrivedToOffice")},{default:s(()=>[t(o(z),{value:r.value.arrived_to_office_date,"onUpdate:value":a[12]||(a[12]=l=>r.value.arrived_to_office_date=l),type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:e.$t("dashboardPrescription.dobPlaceHolder"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"]),t(o(_),{justify:"end",class:"mt-4"},{default:s(()=>[t(o(h),{onClick:a[13]||(a[13]=l=>f.value=!1)},{default:s(()=>[m(c(e.$t("dashboardPrescription.cancel")),1)]),_:1}),t(o(h),{type:"primary",onClick:H},{default:s(()=>[m(c(e.$t("dashboardPrescription.save")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])]),_:1})])}}},me=ae(pe,[["__scopeId","data-v-59db7ee3"]]);export{me as default};
